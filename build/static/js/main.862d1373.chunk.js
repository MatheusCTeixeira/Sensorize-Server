(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],{150:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(24),o=a.n(c),l=(a(99),a(10)),i=a(2),s=a(4),u=a(3),d=a(5),m=a(19),p=a(9),h=a(92),f=a(83),b=a(156),v=a(158),E=a(8),y=a(157),g=a(14),O=a.n(g),j="";function w(){return O.a.get(j+"/api/datasources/",{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)}var S=function e(){var t=this;Object(i.a)(this,e),this.label=void 0,this.chartType=void 0,this.dataSources=void 0,this.bufferSize=void 0,this.findDataSourceById=function(e){return{id:e,label:"Sensor #".concat(e)}},this.checkForNullInputs=function(){return!(null!=t.label.current&&null!=t.chartType.current&&null!=t.dataSources.current&&null!=t.bufferSize.current)},this.readInput=function(){var e=t.label.current.value,a=t.chartType.current.value,r=parseInt(t.bufferSize.current.value);return{id:null,label:e,chartType:a,dataSources:Array.from(t.dataSources.current.selectedOptions).map(function(e){return parseInt(e.value)}).map(function(e){return t.findDataSourceById(e)}),buffer:r}},this.fetchDataSources=function(){return w()},this.label=n.a.createRef(),this.chartType=n.a.createRef(),this.dataSources=n.a.createRef(),this.bufferSize=n.a.createRef()},C="";function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.controller=new S,a.componentDidMount=function(){a.controller.fetchDataSources().then(function(e){a.setState({dataSources:e})}).catch(function(e){E.NotificationManager.error("Could not load Data Sources!")})},a.editChart=function(){if(a.controller.checkForNullInputs()){var e="Invalid Input Fields";throw E.NotificationManager.error(e),Error(e)}var t=a.controller.readInput();t.id=a.state.chart.id,function(e){return O.a.put(C+"/api/charts/".concat(e.id),e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)}(t).then(function(e){t=e,a.props.editCallback(t),E.NotificationManager.success("Chart updated!")}).catch(function(e){E.NotificationManager.error("Could not update Chart!")}),a.hideModal()},a.showModal=function(){a.setState({modal:!0})},a.hideModal=function(){a.setState({modal:!1})},a.listDataSources=function(){return a.state.dataSources.map(function(e,t){return n.a.createElement("option",{key:t,value:e.id},e.label)})},a.makeBody=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"formBasicEmail"},n.a.createElement(h.a,null,"Label"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Chart Label",defaultValue:a.state.chart.label,ref:a.controller.label}),n.a.createElement(f.a,{className:"text-muted"},"Chart Label. Eg. Chart #1"),n.a.createElement(h.a,null,"Chart Type"),n.a.createElement("select",{className:"form-control",defaultValue:a.state.chart.chartType,ref:a.controller.chartType},n.a.createElement("option",{value:"Bar Chart"},"Bar Chart"),n.a.createElement("option",{value:"Line Chart"},"Line Chart"),n.a.createElement("option",{value:"Pie Chart"},"Pie Chart"),n.a.createElement("option",{value:"Scatter Plot"},"Scatter Plot")),n.a.createElement(f.a,{className:"text-muted"},"Chart Type. Eg. Line Chart, Pie Chart, ..."),n.a.createElement(h.a,null,"Data Sources"),n.a.createElement("select",{multiple:!0,className:"form-control",defaultValue:a.state.chart.dataSources.map(function(e){return e.id.toString()}),ref:a.controller.dataSources},a.listDataSources()),n.a.createElement(f.a,{className:"text-muted"},"Data Source to be ploted. Eg. Sensor #1, ..."),n.a.createElement(h.a,null,"Buffer Size"),n.a.createElement("input",{type:"number",placeholder:"Buffer Size",className:"form-control",ref:a.controller.bufferSize,defaultValue:a.state.chart.buffer.toString()}),n.a.createElement(f.a,{className:"text-muted"},"The buffer size. Eg. 150 samples."))))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{modal:!1}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.dataSources?n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:this.state.modal,onHide:this.hideModal},n.a.createElement(b.a.Header,null,this.state.chart.label),n.a.createElement(b.a.Body,null,this.makeBody()),n.a.createElement(b.a.Footer,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"warning",onClick:this.editChart},"Save"))),n.a.createElement(v.a,{className:"btn btn-light text-warning  mx-2 tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons"},"edit"),n.a.createElement("span",{className:"tooltiptext"},"Edit Data Source"))):null}}]),t}(n.a.Component);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.removeChart=function(){var e,t=a.state.chart;(e=t.id,O.a.delete(C+"/api/charts/".concat(e),{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(200===e.status)}).catch(Promise.reject)).then(function(e){if(!e)throw new Error("Could not delete Chart!");a.props.deleteCallback(t)}).catch(function(e){E.NotificationManager.error("Could not delete Chart!")}),a.hideModal()},a.showModal=function(){a.setState({modal:!0})},a.hideModal=function(){a.setState({modal:!1})},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{modal:!1}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:this.state.modal,onHide:this.hideModal},n.a.createElement(b.a.Header,null,this.state.chart.label),n.a.createElement(b.a.Body,null,n.a.createElement("h4",null,"Are you sure?")),n.a.createElement(b.a.Footer,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"danger",onClick:this.removeChart},"Delete"))),n.a.createElement(v.a,{className:"btn btn-light text-danger mx-2 tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons"},"delete_forever"),n.a.createElement("span",{className:"tooltiptext"},"Delete Data Source")))}}]),t}(n.a.Component),x=a(23),T=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.state=e,a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.b,{to:"/chart/".concat(this.state.chart.id),className:"btn text-primary tootiped-component"},n.a.createElement(v.a,{className:"btn btn-light text-primary tootiped-component"},n.a.createElement("i",{className:"material-icons"},"remove_red_eye"),n.a.createElement("span",{className:"tooltiptext"},"Visualize Chart"))))}}]),t}(n.a.Component),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.state=e,a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card m-4 chart-card"},n.a.createElement("h5",{className:"card-header"},this.state.chart.label),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},"Chart features:"),n.a.createElement("div",{className:"card-text w-100"},n.a.createElement("table",{className:"chart-features"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Label"),n.a.createElement("td",null,this.state.chart.label)),n.a.createElement("tr",null,n.a.createElement("td",null,"Data Sources"),n.a.createElement("td",null,this.state.chart.dataSources.map(function(e){return e.label}).reduce(function(e,t){return e+", "+t}))),n.a.createElement("tr",null,n.a.createElement("td",null,"Chart Type"),n.a.createElement("td",null,this.state.chart.chartType)),n.a.createElement("tr",null,n.a.createElement("td",null,"Chart Buffer"),n.a.createElement("td",null,this.state.chart.buffer))))),n.a.createElement(k,{chart:this.state.chart,deleteCallback:this.props.deleteCallback}),n.a.createElement(D,{chart:this.state.chart,editCallback:this.props.editCallback}),n.a.createElement(T,{chart:this.state.chart})))}}]),t}(n.a.Component);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.controller=new S,a.componentDidMount=function(){a.controller.fetchDataSources().then(function(e){a.setState({dataSources:e})}).catch(function(e){E.NotificationManager.error("Could not load Data Sources!")})},a.showModal=function(){a.setState({show:!0})},a.hideModal=function(){a.setState({show:!1})},a.add=function(){if(a.controller.checkForNullInputs())throw Error("Invalid Input Fields");var e=a.controller.readInput();a.hideModal(),function(e){return delete e.id,e.dataSources.forEach(function(e){return e.id}),O.a.post(C+"/api/charts",e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)}(e).then(function(t){e=t,a.props.addCallback(e),E.NotificationManager.success("Chart Added!")}).catch(function(e){E.NotificationManager.error("Could not add Chart!")})},a.listDataSources=function(){return a.state.dataSources.map(function(e,t){return n.a.createElement("option",{key:t,value:e.id},e.label)})},a.makeAddBody=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"formBasicEmail"},n.a.createElement(y.a.Label,null,"Label"),n.a.createElement("input",{className:"form-control",type:"text",placeholder:"Chart Label",ref:a.controller.label}),n.a.createElement(y.a.Text,{className:"text-muted"},"Chart Label. Eg. Chart #1"),n.a.createElement(y.a.Label,null,"Chart Type"),n.a.createElement("select",{className:"form-control",ref:a.controller.chartType},n.a.createElement("option",{value:"Bar Chart"},"Bar Chart   "),n.a.createElement("option",{value:"Line Chart"},"Line Chart  "),n.a.createElement("option",{value:"Pie Chart"},"Pie Chart   "),n.a.createElement("option",{value:"Scatter Plot"},"Scatter Plot")),n.a.createElement(y.a.Text,{className:"text-muted"},"Chart Type. Eg. Line Chart, Pie Chart, ..."),n.a.createElement(y.a.Label,null,"Data Sources"),n.a.createElement("select",{multiple:!0,className:"form-control",ref:a.controller.dataSources},a.listDataSources()),n.a.createElement(y.a.Text,{className:"text-muted"},"Data Source to be ploted. Eg. Sensor #1, ..."),n.a.createElement(y.a.Label,null,"Buffer Size"),n.a.createElement("input",{type:"number",placeholder:"Buffer Size",className:"form-control",ref:a.controller.bufferSize}),n.a.createElement(y.a.Text,{className:"text-muted"},"The buffer size. Eg. 150 samples."))))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{show:!1}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return null==this.state.dataSources?null:n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"add-component tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons md-48"},"add_circle_outline"),n.a.createElement("span",{className:"tooltiptext"},"Add Chart")),n.a.createElement(b.a,{show:this.state.show,onHide:this.hideModal},n.a.createElement(b.a.Header,{closeButton:!0},n.a.createElement(b.a.Title,null,"Chart")),n.a.createElement(b.a.Body,null,this.makeAddBody()),n.a.createElement(b.a.Footer,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"primary",onClick:this.add},"Add"))))}}]),t}(n.a.Component),I=[{id:1,dataType:"Continuous",ipAddress:"127.0.0.1",port:3001,label:"Sensor #1",sampleFrequency:.5},{id:2,dataType:"Discrete",ipAddress:"127.0.0.1",port:3002,label:"Sensor #2",sampleFrequency:1},{id:3,dataType:"Continuous",ipAddress:"127.0.0.1",port:3003,label:"Sensor #3",sampleFrequency:1},{id:4,dataType:"Discrete",ipAddress:"127.0.0.1",port:3004,label:"Sensor #4",sampleFrequency:4}],q=[{id:1,buffer:70,chartType:"Line Chart",label:"Temperature Scale (\xbaC)",dataSources:[I[0],I[1],I[2]]},{id:2,buffer:10,chartType:"Bar Chart",label:"Chart #2",dataSources:[I[0],I[1],I[2]]},{id:3,buffer:50,chartType:"Scatter Plot",label:"Radioactivity (Bq)",dataSources:[I[0],I[1],I[2]]},{id:4,buffer:10,chartType:"Pie Chart",label:"Disk Storage Space (GB)",dataSources:[I[0],I[1],I[2]]}];function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.componentDidMount=function(){O.a.get(C+"/api/charts",{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject).then(function(e){a.setState({charts:e})}).catch(function(e){E.NotificationManager.error("Could not fetch chats!")})},a.componentWillUnmount=function(){var e;(e=q).push.apply(e,Object(m.a)(a.state.charts))},a.addChart=function(e){a.setState(function(t,r){return{charts:[].concat(Object(m.a)(a.state.charts),[e])}})},a.editChart=function(e){a.setState(function(t,a){return{charts:t.charts.map(function(t){return t.id===e.id&&(t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{},e)),t})}})},a.deleteChart=function(e){a.setState(function(t,a){return{charts:t.charts.filter(function(t){return t.id!==e.id})}})},a.makeList=function(){return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row-sm-6"},n.a.createElement("div",{className:"col"},a.state.charts.map(function(e,t){return n.a.createElement(M,{key:JSON.stringify(e),chart:e,editCallback:a.editChart,deleteCallback:a.deleteChart})}))))},a.state={charts:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{addCallback:this.addChart}),this.makeList())}}]),t}(n.a.Component);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.showModal=function(){a.setState({modal:!0})},a.hideModal=function(){a.setState({modal:!1})},a.delete=function(){var e,t=a.props.dataSource;a.hideModal(),(e=t.id,O.a.delete(j+"/api/datasources/".concat(e),{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(200===e.status)}).catch(Promise.reject)).then(function(e){if(!e)throw new Error("Could not delete Data Source");a.props.deleteCallback(t),E.NotificationManager.success("Data Source deleted!")}).catch(function(e){E.NotificationManager.error("Could not delete Data Source")})},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{modal:!1}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:this.state.modal,onHide:this.hideModal},n.a.createElement(b.a.Header,null,this.state.dataSource.label),n.a.createElement(b.a.Body,null,n.a.createElement("h4",null,"Are you sure?")),n.a.createElement(b.a.Footer,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"danger",onClick:this.delete},"Delete"))),n.a.createElement(v.a,{className:"btn btn-light text-danger mx-2 tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons"},"delete_forever"),n.a.createElement("span",{className:"tooltiptext"},"Delete Data Source")))}}]),t}(n.a.Component),H=a(31),U=a.n(H),V=a(86),_=a(87),W=function e(){var t=this;Object(i.a)(this,e),this.ipAddress=void 0,this.port=void 0,this.label=void 0,this.dataType=void 0,this.sampleFrequency=void 0,this.checkForNullInputs=function(){return!(null!=t.ipAddress&&null!=t.port&&null!=t.label&&null!=t.dataType&&null!=t.sampleFrequency)},this.readInput=function(){var e=t.ipAddress.current.value,a=t.port.current.value,r=t.label.current.value,n=t.dataType.current.value,c=t.sampleFrequency.current.value;return{id:null,ipAddress:e,port:parseInt(a),label:r,dataType:n,sampleFrequency:parseFloat(c)}},this.ipAddress=n.a.createRef(),this.port=n.a.createRef(),this.label=n.a.createRef(),this.dataType=n.a.createRef(),this.sampleFrequency=n.a.createRef()};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var J,Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.controller=new W,a.showModal=function(){a.setState({modal:!0})},a.hideModal=function(){a.setState({modal:!1})},a.edit=function(){var e,t=a.controller.readInput();t.id=a.props.dataSource.id,a.hideModal(),(e=t,O.a.put(j+"/api/datasources/".concat(e.id),e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)).then(function(e){t=e,a.props.editCallback(e),E.NotificationManager.success("Data Source updated!")}).catch(function(e){E.NotificationManager.error("Unable to update Data Source!")})},a.makeBody=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"formBasicEmail"},n.a.createElement(h.a,null,"IP Address"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Source IP",defaultValue:a.state.dataSource.ipAddress,ref:a.controller.ipAddress}),n.a.createElement(f.a,{className:"text-muted"},"Data Source IP Address. Eg. 127.0.0.1"),n.a.createElement(h.a,null,"Port Number"),n.a.createElement("input",{type:"number",className:"form-control",placeholder:"Port Number",defaultValue:a.state.dataSource.port.toString(),ref:a.controller.port}),n.a.createElement(f.a,{className:"text-muted"},"Port Number \u2265 3000."),n.a.createElement(h.a,null,"Label"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Source Label",defaultValue:a.state.dataSource.label,ref:a.controller.label}),n.a.createElement(f.a,{className:"text-muted"},"Data Source Label. Eg. Sensor #1"),n.a.createElement(h.a,null,"Data Type"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Type",defaultValue:a.state.dataSource.dataType,ref:a.controller.dataType}),n.a.createElement(f.a,{className:"text-muted"},"Continuous or Discrete."),n.a.createElement(h.a,null,"Sample Frequency"),n.a.createElement("input",{type:"number",step:".1",className:"form-control",placeholder:"Sample Frequency",defaultValue:a.state.dataSource.sampleFrequency.toString(),ref:a.controller.sampleFrequency}),n.a.createElement(f.a,{className:"text-muted"},"Sample Frequency \u2264 4Hz."))))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{modal:!1}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:this.state.modal,onHide:this.hideModal},n.a.createElement(U.a,null,this.state.dataSource.label),n.a.createElement(V.a,null,this.makeBody()),n.a.createElement(_.a,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"warning",onClick:this.edit},"Save"))),n.a.createElement(v.a,{className:"btn btn-light text-warning  mx-2 tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons"},"edit"),n.a.createElement("span",{className:"tooltiptext"},"Edit Data Source")))}}]),t}(n.a.Component),Z=function(){function e(){Object(i.a)(this,e)}return Object(p.a)(e,null,[{key:"data",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=t,r=e.ipAddress,n=e.port,c="http://".concat(r,":").concat(n,"/data/").concat(a);return new Promise(function(t,a){O.a.get(c).then(function(a){t({dataSource:e,data:a.data})}).catch(function(e){a(e)})})}},{key:"status",value:function(e){var t=e.ipAddress,a=e.port,r="http://".concat(t,":").concat(a,"/status");return new Promise(function(e,t){O.a.get(r).then(function(t){var a=t.data;a.uptime=new Date(a.uptime),e(a)}).catch(function(e){t(e)})})}}]),e}();function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}!function(e){e.On="On",e.Off="Off"}(J||(J={}));var K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.hideModal=function(){a.setState({modal:!1})},a.showModal=function(){a.setState({modal:!0})},a.componentDidMount=function(){a.fetchDataSourceStatus()},a.fetchDataSourceStatus=function(){Z.status(a.state.dataSource).then(function(e){a.setState({status:e})}).catch(function(){a.setState({status:{sensorStatus:J.Off,uptime:null,requestPerHour:null}})})},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{modal:!1,status:{sensorStatus:J.Off,uptime:null,requestPerHour:null}}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:this.state.modal,onHide:this.hideModal},n.a.createElement(U.a,null,this.state.dataSource.label),n.a.createElement(V.a,{className:"text-center"},n.a.createElement("h4",null,"Test Data Source"),n.a.createElement("div",{className:"p-3"}),n.a.createElement(v.a,{variant:"success",onClick:this.fetchDataSourceStatus},"Send Request"),n.a.createElement("div",{className:"p-2"}),n.a.createElement("table",{className:"table-view w-100"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Status"),n.a.createElement("td",null,this.state.status.sensorStatus.toString())),n.a.createElement("tr",null,n.a.createElement("td",null,"Up Time"),n.a.createElement("td",null,this.state.status.uptime?this.state.status.uptime.toLocaleDateString():"--:--:--")),n.a.createElement("tr",null,n.a.createElement("td",null,"Request per hour"),n.a.createElement("td",null,this.state.status.requestPerHour?this.state.status.requestPerHour:"---"))))),n.a.createElement(_.a,null,n.a.createElement(v.a,{variant:"secondary",onClick:this.hideModal},"Cancel"))),n.a.createElement(v.a,{className:"btn btn-light text-primary mx-2 tootiped-component",onClick:this.showModal},n.a.createElement("i",{className:"material-icons"},"network_check"),n.a.createElement("span",{className:"tooltiptext"},"Test Data Source")))}}]),t}(n.a.Component);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card m-4 datasource-card"},n.a.createElement("h5",{className:"card-header"},this.state.dataSource.label),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},"Data Source features:"),n.a.createElement("div",{className:"card-text w-100"},n.a.createElement("table",{className:"datasource-features"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"IP Address"),n.a.createElement("td",null,this.state.dataSource.ipAddress)),n.a.createElement("tr",null,n.a.createElement("td",null,"Port"),n.a.createElement("td",null,this.state.dataSource.port)),n.a.createElement("tr",null,n.a.createElement("td",null,"Data Type"),n.a.createElement("td",null,this.state.dataSource.dataType)),n.a.createElement("tr",null,n.a.createElement("td",null,"Sample Frequency"),n.a.createElement("td",null,this.state.dataSource.sampleFrequency))))),n.a.createElement("div",null,n.a.createElement(z,{dataSource:this.state.dataSource,deleteCallback:this.props.deleteCallback}),n.a.createElement(Y,{dataSource:this.state.dataSource,editCallback:this.props.editCallback}),n.a.createElement(K,{dataSource:this.state.dataSource}))))}}]),t}(r.Component),ee=a(82),te=a(93);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.controller=new W,a.showModal=function(){a.setState({show:!0})},a.hideModal=function(){a.setState({show:!1})},a.add=function(){var e=a.controller.readInput();a.hideModal(),function(e){return delete e.id,O.a.post(j+"/api/datasources/",e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)}(e).then(function(t){e=t,a.props.addCallback(e),E.NotificationManager.success("Data Source added!")}).catch(function(){E.NotificationManager.error("Could not add Data Source!")})},a.makeAddBody=function(){return n.a.createElement("div",null,n.a.createElement(y.a,null,n.a.createElement(ee.a,{controlId:"formBasicEmail"},n.a.createElement(h.a,null,"IP Address"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Source IP",ref:a.controller.ipAddress}),n.a.createElement(f.a,{className:"text-muted"},"Data Source IP Address. Eg. 127.0.0.1"),n.a.createElement(h.a,null,"Port Number"),n.a.createElement("input",{type:"number",className:"form-control",placeholder:"Port Number",ref:a.controller.port}),n.a.createElement(f.a,{className:"text-muted"},"Port Number \u2265 3000."),n.a.createElement(h.a,null,"Label"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Source Label",ref:a.controller.label}),n.a.createElement(f.a,{className:"text-muted"},"Data Source Label. Eg. Sensor #1"),n.a.createElement(h.a,null,"Data Type"),n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Data Type",ref:a.controller.dataType}),n.a.createElement(f.a,{className:"text-muted"},"Continuous or Discrete."),n.a.createElement(h.a,null,"Sample Frequency"),n.a.createElement("input",{type:"number",className:"form-control",placeholder:"Sample Frequency",ref:a.controller.sampleFrequency}),n.a.createElement(f.a,{className:"text-muted"},"Sample Frequency \u2264 4Hz."))))},a.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"add-component tootiped-component",onClick:a.showModal},n.a.createElement("i",{className:"material-icons md-48"},"add_circle_outline"),n.a.createElement("span",{className:"tooltiptext"},"Add Data Source")),n.a.createElement(b.a,{show:a.state.show,onHide:a.hideModal},n.a.createElement(U.a,null,n.a.createElement(te.a,null,"Data Source")),n.a.createElement(V.a,null,a.makeAddBody()),n.a.createElement(_.a,null,n.a.createElement(v.a,{variant:"secondary",onClick:a.hideModal},"Cancel"),n.a.createElement(v.a,{variant:"primary",onClick:a.add},"Add"))))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{show:!1}),a}return Object(d.a)(t,e),t}(n.a.Component);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.componentDidMount=function(){w().then(function(e){a.setState({dataSources:e})}).catch(function(e){E.NotificationManager.error("Could not load Data Sources!")})},a.addDataSource=function(e){a.setState(function(t,a){return{dataSources:[].concat(Object(m.a)(t.dataSources),[e])}})},a.editDataSource=function(e){a.setState(function(t,a){return{dataSources:t.dataSources.map(function(t){return t.id===e.id&&(t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{},e)),t})}})},a.deleteDataSource=function(e){a.setState(function(t,a){return{dataSources:t.dataSources.filter(function(t){return t.id!==e.id})}})},a.state={dataSources:new Array},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(re,{addCallback:this.addDataSource}),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row-sm-6"},n.a.createElement("div",{className:"col"},this.state.dataSources.map(function(t,a){return n.a.createElement(X,{key:JSON.stringify(t),dataSource:t,deleteCallback:e.deleteDataSource,editCallback:e.editDataSource})})))))}}]),t}(n.a.Component),oe=a(21),le=(a(75),a(76),a(77),a(78),a(79),a(148),a(47)),ie=a.n(le),se=a(90),ue="";function de(){return O.a.get(ue+"/api/users",{withCredentials:!0,headers:{Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).then(function(e){return e.avatar=ue+e.avatar,Promise.resolve(e)}).catch(Promise.reject)}var me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).regName=void 0,a.regEmail=void 0,a.regPassword=void 0,a.regAvatar=void 0,a.getRegisterData=function(){var e=new FormData;return e.append("name",a.regName.current.value),e.append("email",a.regEmail.current.value),e.append("password",a.regPassword.current.value),e.append("avatar",a.regAvatar.current.files[0]),e},a.registerUser=Object(se.a)(ie.a.mark(function e(){var t;return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.getRegisterData(),(r=t,O.a.post(ue+"/api/users",r).then(function(e){return Promise.resolve(e.status)}).catch(Promise.reject)).then(function(e){200===e?E.NotificationManager.success("User registred!"):E.NotificationManager.warning("Invalid data!")}).catch(function(e){E.NotificationManager.error("Network error!")});case 2:case"end":return e.stop()}var r},e)})),a.showAvatar=function(){var e=new FileReader;e.readAsDataURL(a.regAvatar.current.files[0]),e.onload=function(e){var t=document.getElementById("avatarPreview"),a=e.target.result;t.setAttribute("src",a)}},a.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Register"),n.a.createElement("div",{className:"form-group frame"},n.a.createElement("label",{htmlFor:"customFile"},"Avatar",n.a.createElement("img",{className:"preview",id:"avatarPreview"})),n.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",ref:a.regAvatar,onChange:a.showAvatar})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Name"),n.a.createElement("input",{type:"text",className:"form-control",ref:a.regName})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",className:"form-control",ref:a.regEmail})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",ref:a.regPassword})),n.a.createElement("button",{className:"btn btn-primary",onClick:a.registerUser},"Submit"))},a.regName=Object(r.createRef)(),a.regEmail=Object(r.createRef)(),a.regPassword=Object(r.createRef)(),a.regAvatar=Object(r.createRef)(),a}return Object(d.a)(t,e),t}(r.Component),pe=(a(150),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).loginEmail=void 0,a.loginPassword=void 0,a.getLoginData=function(){return{email:a.loginEmail.current.value,password:a.loginPassword.current.value}},a.login=function(){var e,t=a.getLoginData();(e=t,O.a.post(ue+"/api/login",JSON.stringify(e),{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return console.log("Here"),console.log(e),Promise.resolve(e.status)}).catch(function(e){console.log(e)})).then(function(e){e?(E.NotificationManager.success("User logged!"),a.props.history.push("/home")):(E.NotificationManager.warning("Login failed!"),a.props.history.push("/login"))}).catch(function(e){E.NotificationManager.error("Network error!")})},a.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Login"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",className:"form-control",ref:a.loginEmail})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",ref:a.loginPassword})),n.a.createElement("button",{className:"btn btn-primary",onClick:a.login},"Login"))},a.loginEmail=Object(r.createRef)(),a.loginPassword=Object(r.createRef)(),a}return Object(d.a)(t,e),t}(r.Component)),he=Object(oe.f)(pe),fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).render=function(){return n.a.createElement("div",{className:"screen"},n.a.createElement(E.NotificationContainer,{leaveTimeout:200,enterTimeout:100}),n.a.createElement("video",{autoPlay:!0,muted:!0,loop:!0,id:"myVideo",className:"screen"},n.a.createElement("source",{src:"asset/background.mp4",type:"video/mp4"}),"Your browser does not support HTML5 video."),n.a.createElement("div",{className:"register"},n.a.createElement(me,null)),n.a.createElement("div",{className:"login"},n.a.createElement(he,null)))},a}return Object(d.a)(t,e),t}(r.Component);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.componentDidMount=function(){a.fetchUserData()},a.fetchUserData=function(){de().then(function(e){var t=document.getElementById("avatar");t.setAttribute("src",e.avatar),t.setAttribute("title",e.name)}).catch(function(e){a.props.history.push("/login")})},a.logout=function(){O.a.get(ue+"/api/logout",{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return Promise.resolve(200===e.status)}).catch(Promise.reject).then(function(e){if(!e)throw new Error("Could not logout!");E.NotificationManager.success("Bye!"),a.props.history.push("/login")}).catch(function(e){return E.NotificationManager.error(e)})},a.render=function(){return n.a.createElement("div",null,n.a.createElement(E.NotificationContainer,{leaveTimeout:200,enterTimeout:100}),n.a.createElement("div",{className:"top-bar"},n.a.createElement(x.b,{to:"/home"},n.a.createElement("label",null,"Sensorize")),n.a.createElement("div",{className:"hr"})),n.a.createElement("div",{className:"left-menu"},n.a.createElement("div",{className:"avatar"},n.a.createElement("img",{id:"avatar"})),n.a.createElement("div",{className:"gap"}),n.a.createElement(x.b,{to:"/home"},n.a.createElement("div",{className:"menu-item"},n.a.createElement("i",{className:"material-icons mx-1"},"home"),n.a.createElement("label",null,"Home"))),n.a.createElement(x.b,{to:"/chart"},n.a.createElement("div",{className:"menu-item"},n.a.createElement("i",{className:"material-icons mx-1"},"insert_chart"),n.a.createElement("label",null,"Charts"))),n.a.createElement(x.b,{to:"/datasource"},n.a.createElement("div",{className:"menu-item"},n.a.createElement("i",{className:"material-icons mx-1"},"settings_applications"),n.a.createElement("label",null,"Data Source"))),n.a.createElement(x.b,{to:"/logout"},n.a.createElement("div",{className:"menu-item",onClick:a.logout},n.a.createElement("i",{className:"material-icons mx-1"},"exit_to_app"),n.a.createElement("label",null,"Logout")))))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a}return Object(d.a)(t,e),t}(n.a.Component),Ee=Object(oe.f)(ve),ye=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"header top-bar",id:"top"},n.a.createElement("nav",{className:"navigator"},n.a.createElement("ul",{className:"item"},n.a.createElement("a",{href:"#sensorize"},"Sensorize")),n.a.createElement("ul",{className:"item"},n.a.createElement("a",{href:"#actors"},"Actors")),n.a.createElement("ul",{className:"item"},n.a.createElement("a",{href:"#howitworks"},"How it works")),n.a.createElement("ul",{className:"item login"},n.a.createElement("a",{href:"/login"},"Login"))),n.a.createElement("div",{className:"hr"})),n.a.createElement("div",{className:"content container pt-5 text-black"},n.a.createElement("div",{className:"topic",id:"sensorize"},n.a.createElement("h3",null,"Sensorize"),n.a.createElement("div",{style:{textAlign:"justify",lineHeight:1.8}},"With the advancement of machine learning and other branches of artificial intelligence, data analysis has become increasingly necessary and common for increasing the production efficiency and optimization of services offered by companies and for academic research. Many companies and research groups work with sensors and other data sources. In these, it is common to implement systems with specific purpose to analyze the collected data, demanding time and money in the creation of systems that provide the necessary tools for the visualization and analysis of the data. Based on these facts, this project provides an application capable of serving a wide range of data sources, from sensors to user-collected data, and performing predictive calculations on them in real time. The advantage of the application developed in this project is the flexibility as to the type of data source, the scalability and the fact that it does not require dedicated application servers. Therefore, this project presents a tool to serve various types of users, providing a data visualization platform and statistical analysis tools independent of operating system, hardware, data source type, database used for data storage. data sources and device used for user access to the system.")),n.a.createElement("div",{className:"topic",id:"actors"},n.a.createElement("h3",null,"Actors"),n.a.createElement("div",{style:{textAlign:"justify",lineHeight:1.8}},n.a.createElement("p",null,"For the proper functioning of the system was made use of three elements: the application, the server and the data source."),n.a.createElement("p",null,"The data source is the element that originates the data that will be displayed and processed in the application. The transmitted data may be as a function of time, a time series, or as a function of a finite set of values, referred to in this system as categories."),n.a.createElement("p",null,"The server is the element that stores user data, data sources, and graphics. It is also responsible for authenticating users on the system. Each user has graphs and data sources associated with them and it is the server's responsibility to control the association between the data of these elements and the user, that is, the server must control which graphs and data source belongs to a particular user and allow the user to can change the data belonging to it."),n.a.createElement("p",null,"Finally, the application is a web application that runs on the user's browser. It is responsible for requesting data from data sources and then displaying the returned data and performing predictive calculations about them. The approach of requesting the data source directly, rather than requesting the server and the data source, was employed to reduce propagation time and avoid server overload."))),n.a.createElement("div",{className:"topic",id:"howitworks"},n.a.createElement("h3",null,"How it works"),n.a.createElement("div",{style:{textAlign:"justify",lineHeight:1.8}},n.a.createElement("p",null,"The structure and relationship between the elements developed in this project, such as the application, the server, and the data source, isolate the responsibility assigned to each of them and allow each to address a specific system need and scope. defined and restricted performance. This reduces the complexity of the system as each element meets a unique need and increases its extensibility as elements can be modified, adjusted or updated in isolation without interfering with each other. The distribution of application, server, and data source functionality balanced the workload performed by each element."),n.a.createElement("p",null,"The application is responsible for fetching data and performing calculations about it. The server is responsible for storing user-associated data, authenticating users, and mediating user access to the database. The data source is responsible for providing data, responding to customer requests and filtering data as needed."),n.a.createElement("p",null,"Some aspects that increased the complexity of the project were data that are asynchronous from the application point of view, the structure of communication between the elements that make up the project, and the complexity of the technologies employed."),n.a.createElement("p",null,"The complexity involved in system asynchronism is due to the fact that the application has no information on when and how data will arrive from data sources. Data from data sources may contain a varying number of samples at any time and depending on Amount of data can cause the user's browser to crash or slow down. To solve this problem an algorithm was created that discards older data when it exceeds the buffered data limit."),n.a.createElement("p",null,"The second source of complexity is due to the communication structure between the elements of the system. At first, all communication between the application and data sources would be through the server, but this approach had many drawbacks to the project as the server would be used as a proxy between client and data source and another consequence of this approach would be the response time of a request, which would be doubled on account of the intermediate element, the server in this case. To solve this problem, the server provides data from the data sources that belong to the user and the user himself requests the data sources as required. As a result, the server is not overloaded and the time required for the communication process between the application and the data source is reduced."),n.a.createElement("p",null,"The last source of complexity comes from the technologies employed in the project. Some of the technologies used, such as the one used to display the graphics, required adaptations to support the processing load and memory consumption required to display the graphics while ensuring a good user experience for the system. To solve these problems, several algorithms have been created, as described above, to adapt the data in a format recognizable by technologies, control of memory and network bandwidth consumption and data processing reduction.")))),n.a.createElement("div",{className:"footer"}))}}]),t}(r.Component),ge=function e(t,a,r,n){var c=this;Object(i.a)(this,e),this.red=t,this.green=a,this.blue=r,this.alpha=n,this.light=function(){return new e(c.red,c.green,c.blue,.3)},this.dark=function(){return new e(c.red,c.green,c.blue,1)},this.toString=function(){return"rgba(".concat(c.red,", ").concat(c.green,", ").concat(c.blue,", ").concat(c.alpha,")")}},Oe=[new ge(255,0,0,.5),new ge(0,255,0,.5),new ge(0,0,255,.5),new ge(128,0,128,.5),new ge(255,255,0,.5),new ge(255,128,0,.5),new ge(0,255,255,.5),new ge(0,0,0,.5)],je=a(32),we=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).canvas=void 0,a.viewChart=void 0,a.data=void 0,a.options=void 0,a.timeID=void 0,a.needToUpdate=void 0,a.timerID=void 0,a.setupData=function(){if(null!=a.props.chart){var e=0;return"Pie Chart"===a.props.chart.chartType?{labels:new Array,datasets:[{label:"dataSource.label",backgroundColor:Oe.map(function(e){return e.light().toString()}),borderColor:Oe.map(function(e){return e.dark().toString()}),borderWidth:1,data:new Array}]}:{labels:[],datasets:a.props.chart.dataSources.map(function(t){return{label:t.label,backgroundColor:Oe[e].light().toString(),borderColor:Oe[e++].light().toString(),borderWidth:3,data:[],fill:!1,lineTension:0}})}}},a.setupOptions=function(){var e="pie"!==a.mappedType();return{scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{display:e},display:e}],xAxes:[{display:e,type:a.mappedCategory(),time:{unit:"millisecond"},ticks:{callback:function(e,t,a){var r=a.length;return t%Math.floor(r/10)===0||r<10?e:null}}}]},hover:{animationDuration:600},legend:{display:!0,position:"bottom"},layout:{padding:50},animation:{duration:600},title:{text:a.props.chart.label,fontSize:16,display:!0}}},a.componentDidMount=function(){var e=a.canvas.current.getContext("2d");a.data=a.setupData(),a.options=a.setupOptions(),a.viewChart=new je.Chart(e,{type:a.mappedType(),data:a.data,options:a.options}),a.props.subscripton(a.updateGraphData),a.timeID=setInterval(a.updateGraph,3e3)},a.componentWillUnmount=function(){a.timeID&&clearInterval(a.timeID)},a.updateGraphData=function(e){switch(a.mappedType()){case"pie":a.pieDataParse(e);break;case"line":a.lineDataParse(e);break;case"bar":a.barDataParse(e);break;case"scatter":a.scatterDataParse(e);break;default:throw"Chart Type not supported."}a.needToUpdate=!0},a.updateGraph=function(){a.needToUpdate&&(a.viewChart.update(),a.needToUpdate=!1)},a.render=function(){return n.a.createElement("div",{className:"container"},n.a.createElement("h1",{className:"text-black"},"View"),n.a.createElement("div",{style:{width:a.props.width,height:a.props.height}},n.a.createElement("canvas",{ref:a.canvas,style:{width:a.props.width,height:a.props.height}})))},a.canvas=n.a.createRef(),a.needToUpdate=!1,je.Chart.defaults.global.defaultFontFamily="'M PLUS 1p', sans-serif",je.Chart.defaults.global.defaultFontColor="black",a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"mappedType",value:function(){switch(this.props.chart.chartType){case"Bar Chart":return"bar";case"Line Chart":return"line";case"Pie Chart":return"pie";case"Scatter Plot":return"scatter";default:throw"Chart Type not supported."}}},{key:"mappedCategory",value:function(){switch(this.props.chart.chartType){case"Bar Chart":return"category";case"Line Chart":return"time";case"Pie Chart":return"line";case"Scatter Plot":return"time";default:throw"Chart Type not supported."}}},{key:"pieDataParse",value:function(e){var t=this.viewChart.data;if(t.labels.findIndex(function(t){return t===e.dataSource.label})<0){var a=e.dataSource.label;t.labels.push(a)}this.viewChart.data.datasets.forEach(function(a,r){var n=t.labels.findIndex(function(t){return t===e.dataSource.label}),c=e.data.length;a.data[n]=e.data[c-1].y})}},{key:"scatterDataParse",value:function(e){this.lineDataParse(e)}},{key:"lineDataParse",value:function(e){var t=this.props.chart.buffer,a=this.viewChart.data,r=e.data.map(function(e){return{x:e.x,y:e.y}}),n=null;a.datasets.map(function(e){return e.data}).filter(function(e){return e.length>t}).map(function(e){return e[e.length-t].x}).forEach(function(e){(null==n||n.getTime()>e.getTime())&&(n=e)}),a.datasets.filter(function(t){return t.label===e.dataSource.label}).forEach(function(e){var t=e.data;n&&(t=t.filter(function(e){return e.x.getTime()>n.getTime()})),e.data=[].concat(Object(m.a)(t),Object(m.a)(r))})}},{key:"barDataParse",value:function(e){var t=this.viewChart.data,a=new Set([].concat(Object(m.a)(t.labels),Object(m.a)(e.data.map(function(e){return e.x.toString()}))));t.labels=Array.from(a);var r=e.data.map(function(e){return{x:e.x,y:e.y}});t.datasets.filter(function(t){return t.label===e.dataSource.label}).forEach(function(e){r.forEach(function(a){var r=t.labels.findIndex(function(e){return e===a.x});e.data[r]=a.y})})}}]),t}(n.a.Component),Se=a(48);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).canvas=void 0,a.chartView=void 0,a.state=void 0,a.timerID=void 0,a.componentDidMount=function(){var e=a.canvas.current.getContext("2d");a.chartView=new je.Chart(e,{data:{datasets:[{label:"Samples",data:[],fill:!1,borderColor:"black",backgroundColor:"white",showLine:!1},{label:"Forecast",data:[],fill:!1,borderColor:"black",backgroundColor:"red",showLine:!0}]},type:"line",options:{legend:{position:"bottom"},scales:{xAxes:[{display:!0,type:"time",time:{unit:"millisecond"},ticks:{callback:function(e,t,a){var r=a.length;return t%Math.floor(r/10)===0||r<10?e:null}}}]},layout:{padding:{bottom:10}},title:{display:!0,text:a.props.data.dataSource.label},animation:{duration:0}}}),a.timerID=setInterval(function(){return a.updateChartData()},5e3)},a.componentWillUnmount=function(){a.timerID&&clearInterval(a.timerID)},a.parseToForecast=function(e){return e.map(function(e){return[e.x,e.y]})},a.parseFromForecast=function(e){return e.map(function(e){return{x:e[0],y:e[1]}})},a.getStimatedValues=function(e){return new Promise(function(t,r){var n=a.parseToForecast(e),c=new Se.main(n);a.setState({max:c.max(),min:c.min(),mean:c.mean(),stdev:c.stdev()}),t(a.forecast(e,10,15))})},a.updateChartData=function(){var e=a.props.data.data,t=e.findIndex(function(t,a){var r=t.x,n=a-1>=0?e[a-1].x:r;return r.getTime()<n.getTime()});t>=0&&(e=e.slice(t)),a.chartView.data.datasets[0].data=e.map(function(e){return e}).slice(-100),e.length>5&&a.getStimatedValues(e.slice(-100)).then(function(e){var t=a.parseFromForecast(e);a.chartView.data.datasets[1].data=t,a.chartView.update()})},a.render=function(){return n.a.createElement("div",{className:"container mb-4 ml-2 mr-2"},n.a.createElement("div",{className:"row justify-content-start"},n.a.createElement("div",{style:{width:"100%",height:a.props.height}},n.a.createElement("canvas",{ref:a.canvas,style:{width:a.props.width,height:a.props.height}}))),n.a.createElement("div",{className:"row"},n.a.createElement("table",{className:"statistic-table"},n.a.createElement("thead",null,n.a.createElement("th",{colSpan:2},"Metrics")),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Maximum"),n.a.createElement("td",null,a.state.max)),n.a.createElement("tr",null,n.a.createElement("td",null,"Minimum"),n.a.createElement("td",null,a.state.min)),n.a.createElement("tr",null,n.a.createElement("td",null,"Mean"),n.a.createElement("td",null,a.state.mean)),n.a.createElement("tr",null,n.a.createElement("td",null,"Standard Deviation"),n.a.createElement("td",null,a.state.stdev))))))},a.canvas=n.a.createRef(),a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{max:void 0,min:void 0,stdev:void 0,mean:void 0}),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"getDeltaTime",value:function(e){var t=[];if(e.length<=1)throw Error("Too small");for(var a=1;a<e.length;++a){var r=e[a].getTime()-e[a-1].getTime();t.push(r)}return t.reduce(function(e,t){return e+t})/t.length}},{key:"convolve",value:function(e,t){for(var a=Math.min(e.length,t.length),r=e.length,n=0,c=0;c<a;++c)n-=e[r-c-1]*t[c];return n}},{key:"forecast",value:function(e,t,a){for(var r=e.map(function(e){return[e.x,e.y]}),n=this.getDeltaTime(r.map(function(e){return e[0]})),c=0;c<a;++c){var o=r,l=new Se.main(o).ARMaxEntropy({degree:t}),i=this.convolve(o.map(function(e){return e[1]}),l),s=o[o.length-1][0].getTime(),u=[new Date(s+n),i];r.push(u)}return r}}]),t}(n.a.Component);function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var Ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.componentDidMount=function(){a.props.subscripton(a.storeData)},a.storeData=function(e){a.state.dataSourcesData.findIndex(function(t){return t.dataSource.id===e.dataSource.id})<0&&a.setState(function(t,a){return{dataSourcesData:[].concat(Object(m.a)(t.dataSourcesData),[e])}}),a.state.dataSourcesData.forEach(function(t){var a;t.dataSource.id===e.dataSource.id&&(a=t.data).push.apply(a,Object(m.a)(e.data))})},a.addRegression=function(){return a.state.dataSourcesData.map(function(e,t){return n.a.createElement("div",{className:"col-6"},n.a.createElement(Pe,{key:t,data:a.state.dataSourcesData[t],width:"100%",height:"450px"}))})},a.render=function(){return a.state.dataSourcesData.length>0===!1?n.a.createElement("div",{className:"spinner-border text-black",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")):n.a.createElement("div",{className:"container mt-5"},n.a.createElement("h3",{className:"text-black"},"Statistics"),n.a.createElement("div",{className:"row"},a.addRegression()))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{dataSourcesData:new Array}),a}return Object(d.a)(t,e),t}(n.a.Component);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.timerID=void 0,a.subscribers=void 0,a.lastDataFetched=new Map,a.dataSourceRequestTimer=new Array,a.startSampling=function(){a.state.chart.dataSources.forEach(function(e){var t=setInterval(function(){return a.fetchData(e)},1e3/e.sampleFrequency);a.dataSourceRequestTimer.push(t)})},a.componentDidMount=function(){var e;(e=parseInt(a.props.match.params.id),O.a.get(C+"/api/charts/"+e,{withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)).then(function(e){a.setState({chart:e})}).catch(function(e){E.NotificationManager.error("Could not load Chart!")})},a.componentWillUnmount=function(){a.dataSourceRequestTimer.forEach(clearInterval)},a.fetchBar=function(e){a.lastDataFetched.has(e.id)||a.lastDataFetched.set(e.id,new Date),Z.data(e,a.lastDataFetched.get(e.id)).then(function(t){t.data.forEach(function(e){return e.x=e.x.toString()}),a.lastDataFetched.set(e.id,new Date),a.notifyAll(t)}).catch(function(e){return console.log(e)})},a.fetchTimeseries=function(e){a.lastDataFetched.has(e.id)||a.lastDataFetched.set(e.id,new Date),Z.data(e,a.lastDataFetched.get(e.id)).then(function(t){var r=t.data,n=t.data[t.data.length-1].x;r.forEach(function(e){return e.x=new Date(e.x)}),a.lastDataFetched.set(e.id,n),a.notifyAll(t)}).catch(function(e){return console.log(e)})},a.fetchData=function(e){"Bar Chart"!==a.state.chart.chartType?a.fetchTimeseries(e):a.fetchBar(e)},a.subscribe=function(e){a.subscribers.push(e)},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a.subscribers=new Array,a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"notifyAll",value:function(e){this.subscribers.forEach(function(t){return t(e)})}},{key:"render",value:function(){return null==this.state.chart?null:(this.startSampling(),n.a.createElement("div",{className:"container mt-3"},n.a.createElement(we,{subscripton:this.subscribe,chart:this.state.chart,width:"100%",height:600}),"Bar Chart"!==this.state.chart.chartType?n.a.createElement(Ne,{subscripton:this.subscribe}):null))}}]),t}(n.a.Component),Te=a(16),Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).avatar=void 0,a.showAvatar=function(){var e=new FileReader,t=a.avatar.current.files;t[0].type.startsWith("image/")?(a.props.onSelected(a.avatar.current.files[0]),e.readAsDataURL(t[0]),e.onload=function(e){var t=document.getElementById("avatarPreview"),a=e.target.result;t.setAttribute("src",a)}):E.NotificationManager.error("Please, select a picture!")},a.render=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"customFile"},n.a.createElement("img",{className:"preview",src:a.props.defaultImage,id:"avatarPreview"}))),n.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",ref:a.avatar,onChange:a.showAvatar}))},a.avatar=n.a.createRef(),a}return Object(d.a)(t,e),t}(r.Component),Ae=a(91),Fe=a.n(Ae),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).name=void 0,a.password=void 0,a.componentDidMount=function(){de().then(function(e){return a.setState({user:e})}).catch(function(e){E.NotificationManager.error("Could not get user data.")})},a.setAvatar=function(e){a.setState({avatar:e})},a.extractData=function(){var e=a.name.current.value,t=a.password.current.value,r=new FormData;return r.set("id",a.state.user.id.toString()),r.set("name",e),t.length>7&&r.set("password",t),a.state.avatar&&r.set("avatar",a.state.avatar),r},a.update=function(){var e,t=a.extractData();(e=t,O.a.put(ue+"/api/users",e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}).then(function(e){return Promise.resolve(e.data)}).catch(Promise.reject)).then(function(e){console.log(e)}).catch(function(e){})},a.render=function(){return a.state.user?n.a.createElement(n.a.Fragment,null,n.a.createElement(Fe.a,null,n.a.createElement("div",{className:"container mt-3 text-black w-50"},n.a.createElement("div",{className:"gap"}),n.a.createElement("h3",null,"Change Avatar"),n.a.createElement("label",null,"Avatar:"),n.a.createElement(Me,{onSelected:a.setAvatar,defaultImage:a.state.user.avatar}),n.a.createElement("div",{className:"gap"}),n.a.createElement("h3",null,"Change Name"),n.a.createElement(ee.a,null,n.a.createElement("label",null,"Name:"),n.a.createElement("input",{type:"text",className:"form-control",style:{textAlign:"center"},ref:a.name,defaultValue:a.state.user.name})),n.a.createElement("div",{className:"gap"}),n.a.createElement("h3",null,"Change Password"),n.a.createElement(ee.a,null,n.a.createElement("label",null,"Password:"),n.a.createElement("input",{type:"password",className:"form-control",ref:a.password,style:{textAlign:"center"}})),n.a.createElement("div",{className:"gap"}),n.a.createElement(v.a,{onClick:a.update},"Save")))):null},a.state={},a.name=Object(r.createRef)(),a.password=Object(r.createRef)(),a}return Object(d.a)(t,e),t}(r.Component);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state=void 0,a.history=Object(Te.a)(),a.render=function(){return n.a.createElement(oe.b,{history:a.history},n.a.createElement(oe.c,null,n.a.createElement(oe.a,{exact:!0,path:"/",component:ye}),n.a.createElement(oe.a,{path:"/login",component:fe}),n.a.createElement(oe.a,{path:"/*",component:Ee})),n.a.createElement("div",{className:"viewport"},n.a.createElement(oe.a,{path:"/home",component:Ie}),n.a.createElement(oe.a,{path:"/datasource",component:ce}),n.a.createElement(oe.a,{path:"/chart",exact:!0,component:L}),n.a.createElement(oe.a,{path:"/chart/:id",component:xe})))},a.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e),a}return Object(d.a)(t,e),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(x.a,{basename:"/",forceRefresh:!0},n.a.createElement(Be,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},94:function(e,t,a){e.exports=a(154)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.862d1373.chunk.js.map